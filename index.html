<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lars' Soundboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
        }
        .sound-button {
            transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
        }
        .sound-button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        /* For a subtle glow effect on buttons in dark mode */
        .dark .sound-button {
            box-shadow: 0 0 15px rgba(100, 100, 255, 0.1);
        }
        .dark .sound-button:hover {
            box-shadow: 0 0 20px rgba(120, 120, 255, 0.2);
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 flex flex-col items-center min-h-screen p-4">

    <header class="mb-8 text-center">
        <img src="https://placehold.co/100x100/334155/E2E8F0?text=Lars" alt="Lars Emoji" id="lars-avatar" class="w-24 h-24 md:w-32 md:h-32 rounded-full mx-auto mb-4 border-4 border-slate-700 shadow-lg">
        <h1 class="text-3xl md:text-4xl font-bold text-sky-400">Lars' Soundboard</h1>
        <p class="text-slate-400 text-sm md:text-base">Tap a button to hear Lars!</p>
    </header>

    <main id="soundboard-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4 w-full max-w-4xl">
        </main>

    <footer class="mt-12 text-center text-xs text-slate-500">
        <p>Soundboard v1.0. Click a button to play a sound.</p>
        <p>To add your own avatar, replace the placeholder image URL in the HTML with your 'duimpiesomhoog.png' file path.</p>
        <p>To add real sounds, modify the `soundsData` array in the script to point to your audio files and update the `playSound` function.</p>
    </footer>

    <div id="message-box" class="fixed bottom-4 right-4 bg-sky-500 text-white p-3 rounded-lg shadow-xl text-sm transition-opacity duration-300 opacity-0 z-50">
        <span id="message-text"></span>
    </div>

    <script>
        // --- Configuration: Sound Data ---
        // You can easily add more sounds here.
        // For actual audio files, you would replace 'placeholder' with the path to your sound file
        // e.g., { description: "Hello", soundFile: "sounds/hello.mp3", note: "C4" }
        // The 'note' property is used by Tone.js for placeholder sounds.
        const soundsData = [
            { description: "Nee", soundFile: "placeholder_nee", note: "C4" },
            { description: "LetsGo", soundFile: "placeholder_letsgo", note: "D4" },
            { description: "Lunch", soundFile: "placeholder_lunch", note: "E4" },
            { description: "Eet smakelijk", soundFile: "placeholder_eetsmakelijk", note: "F4" },
            { description: "Geen idee", soundFile: "placeholder_geenidee", note: "G4" },
            { description: "Ja", soundFile: "placeholder_ja", note: "A4" },
            { description: "Mooi", soundFile: "placeholder_mooi", note: "B4" },
            { description: "Oh oh", soundFile: "placeholder_ohoh", note: "C5" },
            { description: "Sus", soundFile: "placeholder_sus", note: "D5" },
            { description: "Dankjewel", soundFile: "placeholder_dankjewel", note: "E5" },
            { description: "Graag gedaan", soundFile: "placeholder_graaggedaan", note: "F5" },
            { description: "Hallo", soundFile: "placeholder_hallo", note: "G5" },
            { description: "Doei", soundFile: "placeholder_doei", note: "A5" },
            { description: "Jeetje", soundFile: "placeholder_jeetje", note: "B5" },
            { description: "Optieven", soundFile: "placeholder_optieven", note: "C6" }
        ];

        const soundboardGrid = document.getElementById('soundboard-grid');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        let synth; // Tone.js synth instance

        // --- Initialize Sound Engine (Tone.js) ---
        async function initializeAudio() {
            try {
                await Tone.start(); // Required for user gesture to start audio context
                synth = new Tone.Synth({
                    oscillator: { type: "sine" }, // You can change oscillator type: "sine", "square", "sawtooth", "triangle"
                    envelope: {
                        attack: 0.005,
                        decay: 0.1,
                        sustain: 0.3,
                        release: 0.5 // Shortened release for quicker sounds
                    }
                }).toDestination();
                console.log("Audio context started and synth initialized.");
                showMessage("Audio ready! Tap a button.", 2000);
            } catch (error) {
                console.error("Error starting Tone.js or creating synth:", error);
                showMessage("Error initializing audio.", 3000);
            }
        }

        // --- Play Sound Function ---
        function playSound(sound) {
            if (!synth) {
                console.warn("Synth not initialized. Attempting to initialize now.");
                // Try to initialize audio again if it wasn't ready (e.g., user hadn't interacted yet)
                initializeAudio().then(() => {
                    if (synth) {
                        // If using actual sound files, you'd use Tone.Player here:
                        // const player = new Tone.Player(sound.soundFile).toDestination();
                        // Tone.loaded().then(() => { player.start(); });
                        synth.triggerAttackRelease(sound.note, "8n"); // "8n" is an eighth note duration
                        console.log(`Playing placeholder sound: ${sound.description} (Note: ${sound.note})`);
                    } else {
                         showMessage(`Cannot play: ${sound.description}. Audio not ready.`, 2000);
                    }
                });
                return;
            }

            // For placeholder sounds using Tone.Synth
            try {
                // Ensure Tone.context is running
                if (Tone.context.state !== 'running') {
                    Tone.context.resume().then(() => {
                        console.log("Audio context resumed for playback.");
                        synth.triggerAttackRelease(sound.note, "8n");
                    });
                } else {
                    synth.triggerAttackRelease(sound.note, "8n");
                }
                console.log(`Playing placeholder sound: ${sound.description} (Note: ${sound.note})`);
            } catch (error) {
                console.error(`Error playing sound ${sound.description}:`, error);
                showMessage(`Error playing ${sound.description}.`, 2000);
            }
        }

        // --- Create Sound Buttons ---
        function createSoundButtons() {
            if (!soundboardGrid) {
                console.error("Soundboard grid element not found.");
                return;
            }
            soundsData.forEach(sound => {
                const button = document.createElement('button');
                button.className = 'sound-button bg-slate-800 hover:bg-slate-700 text-sky-300 font-semibold py-4 px-2 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-75 h-24 md:h-28 flex items-center justify-center text-center text-sm md:text-base';
                button.textContent = sound.description;
                
                // Add event listener for click and touchstart for better mobile responsiveness
                button.addEventListener('click', () => {
                    if (Tone.context.state !== 'running') {
                        initializeAudio().then(() => playSound(sound));
                    } else {
                        playSound(sound);
                    }
                });
                // No need for touchstart if click handles it well with -webkit-tap-highlight-color: transparent;
                // and button:active styles. Click is generally preferred for accessibility.

                soundboardGrid.appendChild(button);
            });
        }

        // --- Show Message Function ---
        function showMessage(text, duration = 3000) {
            if (!messageBox || !messageText) return;
            messageText.textContent = text;
            messageBox.classList.remove('opacity-0');
            messageBox.classList.add('opacity-100');

            setTimeout(() => {
                messageBox.classList.remove('opacity-100');
                messageBox.classList.add('opacity-0');
            }, duration);
        }
        
        // --- Initialize the App ---
        document.addEventListener('DOMContentLoaded', () => {
            createSoundButtons();
            // It's good practice to initialize audio on first user interaction.
            // However, for simplicity in this example, we can try to initialize it earlier
            // or prompt the user. Many browsers require a user gesture.
            // We'll use a common pattern: initialize on first click/tap of any sound button if not already.
            // For a better UX, you might add a dedicated "Enable Audio" button.
            console.log("Soundboard UI created. Audio will initialize on first sound button tap if not already active.");

            // Attempt to initialize audio context when the page loads,
            // but it might require a user gesture on some browsers.
            // The playSound function will also attempt to initialize if needed.
            if (typeof Tone !== 'undefined' && Tone.start) {
                 // Silently try to start, will be fully activated on first interaction if needed.
                Tone.start().catch(e => console.warn("Tone.start() needs user interaction, will activate on first click."));
            } else {
                console.error("Tone.js is not loaded correctly.");
                showMessage("Error: Audio library not loaded.", 5000);
            }
        });

    </script>
</body>
</html>
